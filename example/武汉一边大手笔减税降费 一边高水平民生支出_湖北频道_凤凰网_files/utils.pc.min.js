define("utils",["F"],function(e){var t=function(e){if("undefined"!=typeof e)for(var t in e)"undefined"!=typeof this[t]&&(this[t]=e[t])};return t.prototype={commentBtnId:"js_comment_counts",commentConId:"cmtBox",topBtnId:"js_return_top",moveTime:200,moveCounts:20,topBtnDom:null,commentBtnDom:null,commentConDom:null,topFlag:!1,commentFlag:!1,isOpen:!1,detail:{},commentUrl:"//gentie.ifeng.com/view.html",init:function(){this.topBtnDom=e.query("#"+this.topBtnId),this.topFlag=null!==this.topBtnDom,this.commentBtnDom=e.query("#"+this.commentBtnId),this.commentConDom=e.query("#"+this.commentConId),this.commentFlag=0!==this.commentBtnDom.length&&0!==this.commentConDom.length,(this.topFlag||this.commentFlag)&&this.eventInit()},eventInit:function(){var t=this;t.topFlag&&(e.on(t.topBtnDom,"click",function(){var n=e.scrollTop(document.body),o=n/t.moveCounts,a=t.moveTime/t.moveCounts,i=1,r=setInterval(function(){i<=t.moveCounts?(n-=o,scroll(0,n),i++):clearInterval(r)},a)}),e.on(window,"scroll",function(){e.scrollTop(window)>700?e.show(t.topBtnDom):e.hide(t.topBtnDom)})),t.commentFlag&&!this.isOpen&&e.on(t.commentBtnDom,"click",function(){var n=e.offset(t.commentConDom).top,o=e.scrollTop(document.body),a=(o-n)/t.moveCounts,i=t.moveTime/t.moveCounts,r=1,s=setInterval(function(){r<=t.moveCounts?(o-=a,scroll(0,o),r++):clearInterval(s)},i)}),this.isOpen&&e.on(t.commentBtnDom,"click",function(){var e=t.detail,n=t.commentUrl,o=[];o.push("docUrl="+encodeURIComponent(e.docUrl)),o.push("docName="+encodeURIComponent(e.docName)),o.push("skey="+encodeURIComponent(e.skey)),e.speUrl&&o.push("speUrl="+encodeURIComponent(e.speUrl)),window.open(n+"?"+o.join("&"),"","")})}},t}),define("picLazy",["F"],function(e){var t=window,n=e.height(t),o=e.query("img.js_lazyImg"),a=function(){for(var a,i,r,s=e.scrollTop(t),l=o.length-1;l>=0;l--)a=o[l],i=e.offset(a).top,r=e.height(a),0!==r&&i>s-r&&i<s+n&&(a.src=e.attr(a,"data-src"),a.className="",o.splice(l,1))};return a}),define("floatIt.pc",["F"],function(e){var t=window,n=function(n,o){var a=e.offset(n).top,i=1,r=!1;e.on(t,"scroll",function(){r===!1&&10===i&&(i=1,a=e.offset(n).top),r===!1&&a<e.scrollTop(t)?(r=!0,e.addClass(n,o)):a>e.scrollTop(t)&&r===!0&&(r=!1,e.removeClass(n,o)),i++})};return n}),define("share.pc",["F"],function(e){var t={params:{contentFlag:!0,conShareBtnClass:"js_content_share_btn",selectionFlag:!0,imgFlag:!0,selShareBtnClass:"js_select_share_btn",selectAreaClass:"js_selection_area",imgShareBtnClass:"js_img_share_btn",imgShareScopeClass:"js_img_share_area",shareAreaId:"js_select_share",imgAreaId:"js_img_share",wxCloseClass:"js_wx_close",wxIframeClass:"js_weixin_iframe",wxConClass:"js_weixin",wxImgClass:"js_wx_qrcod",imgShareDom:null,urls:{longBlog:"//share.ifeng.com/",qq:"http://v.t.qq.com/share/share.php",qqZone:"//sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey",sina:"http://v.t.sina.com.cn/share/share.php",statistic:"//stadig.ifeng.com/actsta.js",weixin:"//qrcode.ifeng.com/qrcode.php"},sinaRalateUid:"1900552512",selectAreaDom:null,shareAreaDom:null,imgAreaDom:null,beforeFn:null,extClassArr:["photoList","ifengLogo","rightBtn","leftBtn","js_sliderBoxOut"]},model:{contentData:null,startFlag:!1,moveInFlag:!1,imgShareMoveInFlag:!1,endFlag:!1,qrCodeUrl:""},view:{},ctrl:{}},n=t.params,o=t.model,a=(t.view,t.ctrl);n.init=function(t){return"undefined"!=typeof t&&("undefined"!=typeof t.contentFlag&&(n.contentFlag=t.contentFlag),"undefined"!=typeof t.selectionFlag&&(n.selectionFlag=t.selectionFlag),"undefined"!=typeof t.imgFlag&&(n.imgFlag=t.imgFlag),"undefined"!=typeof t.contentData&&(o.contentData=t.contentData),"undefined"!=typeof t.conShareBtnClass&&""!==t.conShareBtnClass&&(n.conShareBtnClass=t.conShareBtnClass),"undefined"!=typeof t.selShareBtnClass&&""!==t.selShareBtnClass&&(n.selShareBtnClass=t.selShareBtnClass),"undefined"!=typeof t.selectAreaClass&&""!==t.selectAreaClass&&(n.selectAreaClass=t.selectAreaClass),"undefined"!=typeof t.imgShareBtnClass&&""!==t.imgShareBtnClass&&(n.imgShareBtnClass=t.imgShareBtnClass),"undefined"!=typeof t.shareAreaId&&""!==t.shareAreaId&&(n.shareAreaId=t.shareAreaId),"undefined"!=typeof t.sinaRalateUid&&""!==t.sinaRalateUid&&(n.sinaRalateUid=t.sinaRalateUid),"undefined"!=typeof t.urls&&("undefined"!=typeof t.urls.qq&&""!==t.urls.qq&&(n.urls.qq=t.urls.qq),"undefined"!=typeof t.urls.qqZone&&""!==t.urls.qqZone&&(n.urls.qqZone=t.urls.qqZone),"undefined"!=typeof t.urls.sina&&""!==t.urls.sina&&(n.urls.sina=t.urls.sina),"undefined"!=typeof t.urls.weixin&&""!==t.urls.weixin&&(n.urls.weixin=t.urls.weixin))),n.selectAreaDom=e.query("."+n.selectAreaClass),0===e.query("."+n.conShareBtnClass).length&&(n.contentFlag=!1),"undefined"!=typeof o.contentData&&null!==t.contentData||(n.contentFlag=!1),0===e.query("#"+n.shareAreaId).length&&(n.selectionFlag=!1),0===n.selectAreaDom.length&&(n.selectionFlag=!1),0===e.query("#"+n.imgAreaId).length&&(n.imgFlag=!1),!!(n.contentFlag||n.selectionFlag||n.imgFlag)&&(n.shareAreaDom=e.query("#"+n.shareAreaId)[0],n.imgAreaDom=e.query("#"+n.imgAreaId)[0],!0)},o.getSelectionText=function(){return window.getSelection?window.getSelection().toString():document.selection&&document.selection.createRange?document.selection.createRange().text:""},o.setSelectionEmpty=function(){window.getSelection?window.getSelection().removeAllRanges():document.body&&document.body.createTextRange&&document.selection.empty()},o.getStatisticUrlByType=function(e,t){var n;return null!==o.opeOfUrl("param",e,"_share")?e=o.opeOfUrl("param",e,"_share",t):1===e.split("?").length?e=e+"?_share="+t:null!==o.opeOfUrl("param",e,"_share")?e=o.opeOfUrl("param",e,"_share",t):(n=e.split("#"),n[0]=n[0]+"&_share="+t,e=n.join("#")),e},o.isIE67=function(){var e=navigator.userAgent.toLowerCase(),t={expStr:/(msie)[ |\/]*(\d*[.\d*]*)/i,name:"msie"},n=e.match(t.expStr);return n instanceof Array&&n.length>1&&n[1]===t.name&&("6.0"===n[2]||"7.0"===n[2])},o.sendStatisticInfo=function(t){var o=n.urls.statistic;e.ajax({url:o,data:t,cache:!0,dataType:"script"})},o.opeOfStr=function(t,n,o){var a=null;if("undefined"!=typeof t){var i=t.split("&");""===t&&"undefined"!=typeof o?a=n+"="+o:e.each(i,function(e,r){var s=r.split("=");return s[0]===n?("undefined"==typeof o?a=s[1]:(i[e]=n+"="+o,a=i.join("&")),!1):void(e===i.length-1&&"undefined"!=typeof o&&(a=t+"&"+n+"="+o))})}return a},o.opeOfHash=function(t,n,a){var i=null;if("undefined"!=typeof t){0===t.indexOf("#")&&(t=t.substr(1));var r=t.split("#");e.each(r,function(e,s){var l=o.opeOfStr(s,n);if("undefined"==typeof a){if(null!==l)return i=l,!1}else{if(null!==l)return r[e]=o.opeOfStr(s,n,a),i="#"+r.join("#"),!1;if(null===l&&e===r.length-1)return i=""===t?"#"+n+"="+a:"#"+t+"&"+n+"="+a,!1}})}return i},o.opeOfParam=function(e,t,n){var a=null;return"undefined"!=typeof e&&(0===e.indexOf("?")&&(e=e.substr(1)),a="undefined"==typeof n?o.opeOfStr(e,t):"?"+o.opeOfStr(e,t,n)),a},o.opeOfUrl=function(e,t,n,a){var i=null;if("undefined"!=typeof t){var r=t.indexOf("#"),s=t.indexOf("?");if("hash"===e){r===-1&&(r=t.length);var l=t.substr(r),c=t.substring(0,r);i="undefined"==typeof a?o.opeOfHash(l,n):c+o.opeOfHash(l,n,a)}else if("param"===e){var u,l,m;s===-1&&r===-1?(u="",l="",m=t):s>-1&&r===-1?(u=t.substr(s),l="",m=t.substr(0,s)):s===-1&&r>-1?(u="",l=t.substr(r),m=t.substr(0,r)):s>r?(u="",l=t.substr(r),m=t.substr(0,r)):(u=t.substring(s,r),l=t.substr(r),m=t.substr(0,s)),i="undefined"==typeof a?o.opeOfParam(u,n):m+o.opeOfParam(u,n,a)+l}}return i},o.getWeixinQRCode=function(t,o){e.ajax({url:n.urls.weixin,dataType:"jsonp",data:t,success:o})},a.init=function(e){n.init(e)&&a.eventInit()},a.shareContent=function(e){if("undefined"!=typeof e){var o="";e.title=encodeURIComponent(e.title);var a={};"sina"===e.type?(o=n.urls.sina,a.url=e.url,a.title=e.title,a.pic=e.pic,a.searchPic=!1,a.appkey="2512457640",a.ralateUid=t.params.sinaRalateUid,a.rcontent=encodeURIComponent(""),a.source="ifeng"):"qq"===e.type?(o=n.urls.qq,a.url=e.url,a.title=e.title,a.pic=e.pic,a.site=encodeURIComponent(window.location.host),a.appkey="801cf76d3cfc44ada52ec13114e84a96",a.rcontent=encodeURIComponent("")):"qqZone"===e.type&&(o=n.urls.qqZone,a.title=e.title,a.url=e.url,a.pics=e.pic);var i=[],r=new Date;r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0),a.url+="?tp="+r.getTime()+"&_share_"+e.type;for(var s in a)i.push(s+"="+a[s]);o+="?"+i.join("&");var l=600,c=450,u=(window.screen.availHeight-30-c)/2,m=(window.screen.availWidth-10-l)/2,d="scrollbars=no,width="+l+",height="+c+",left="+m+",top="+u+",status=no,resizable=yes";window.open(o,"_blank",d)}},a.sendStatisticInfo=function(t){var n={};n.datatype="share",n.value=t;var a=e.query("script");n.ref="",e.each(a,function(e,t){if(t.src.indexOf("//stadig.ifeng.com/page.js")>-1){var a=o.opeOfUrl("param",t.src,"ref");n.ref=null!==a?a:"";var i=o.opeOfUrl("param",t.src,"uid");n.uid=null!==i?i:"";var r=o.opeOfUrl("param",t.src,"sid");n.sid=null!==i?r:""}});var i=window.location.href,r=window.location.hash;null!==o.opeOfUrl("param",i,"_share")?n.uri=o.opeOfUrl("param",i,"_share",t):""===r?n.uri=i+"#_share="+t:null!==o.opeOfUrl("hash",i,"_share")?n.uri=o.opeOfUrl("hash",i,"_share",t):n.uri=o.opeOfUrl("param",i,"_share",t),n.time=(new Date).getTime(),"undefined"!=typeof getChannelInfo&&(n.ci=getChannelInfo()),"function"==typeof getStaPara&&(n.pt=getStaPara()),o.sendStatisticInfo(n)},a.eventInit=function(){var t=a.process;n.contentFlag&&(e.on(e.query("."+n.conShareBtnClass),"click",function(){return t.contentShare(this),!1}),e.on("."+n.wxCloseClass,"click",function(){a.weixinShare(e.parent(e.parent(this)))})),n.selectionFlag&&(o.isIE67()&&e.css(n.selectAreaDom,{position:"relative",zoom:1}),e.on(n.selectAreaDom,"mouseover",function(){t.mouseover()}),e.on(n.selectAreaDom,"mouseout",function(e){t.mouseout(e,this)}),e.on(n.selectAreaDom,"mouseup",function(e){if(t.mouseup(e),o.startFlag&&o.endFlag&&o.moveInFlag&&""!==o.getSelectionText())return!1}),e.on(n.selectAreaDom,"mousedown",function(e){t.hideShareArea(),t.mousedown(e)}),e.on("body","mouseup",function(){t.hideShareArea()}),e.on(n.shareAreaDom,"click",function(){return t.selectionShare(this),!1},{delegate:"."+n.selShareBtnClass})),n.imgFlag&&(e.on("."+n.imgShareScopeClass,"mouseover",function(){t.moveInImg(this)},{delegate:"img"}),e.on("."+n.imgShareScopeClass,"mouseout",function(e){t.moveOutImg(e,this)},{delegate:"img"}),e.on("body","click",function(){return t.imgShare(this),!1},{delegate:"."+n.imgShareBtnClass}))},a.weixinShare=function(t){var i=e.parent(e.parent(t)),r=e.find(i,"."+n.wxConClass)[0],s=e.find(i,"."+n.wxIframeClass)[0],l=e.query(".main"),c=e.attr(r,"data-lockFlag"),u=e.attr(r,"data-showFlag");if(null===c||"unlock"===c)if(e.attr(r,"data-lockFlag","lock"),null===u||"hide"===u){a.sendStatisticInfo("weixin"),e.css(".js_titleName",{zIndex:101});var m=function(){e.addClass(l,"main_wx"),e.show(s),e.show(r),e.animate(s,{height:"100px"},400),e.animate(r,{height:"114px"},400,{callback:function(){e.animate(r,{height:"111px"},100,{callback:function(){e.animate(r,{height:"112px"},100,{callback:function(){e.css(s,{height:"100px"}),e.attr(r,"data-showFlag","show"),e.attr(r,"data-lockFlag","unlock")}})}})}})};if(""!==o.qrCodeUrl)m();else{var d={};d.url=o.getStatisticUrlByType(o.contentData.docUrl,"weixin"),o.getWeixinQRCode(d,function(t){o.qrCodeUrl=t.qrcode_url,e.attr("."+n.wxImgClass,"src",o.qrCodeUrl),m()})}}else e.attr(r,"data-lockFlag","lock"),e.css(".js_titleName",{zIndex:103}),e.animate(r,{height:"0px"},400,{callback:function(){e.attr(r,"data-showFlag","hide"),e.attr(r,"data-lockFlag","unlock"),e.hide(r)}}),e.animate(s,{height:"0px"},400,{callback:function(){e.hide(s)}}),e.removeClass(l,"main_wx")},a.process={},a.process.imgShare=function(t){var o=e.attr(t,"data-type");if("undefined"!=typeof o&&""!==o&&(a.sendStatisticInfo(o),null!==n.imgShareDom)){var i="",r=e.attr(n.imgShareDom,"alt"),s=e.attr(n.imgShareDom,"title"),l=e.attr(n.imgShareDom,"src");null!==r&&(i+=r),""===i&&null!==s&&(i+=s);var c={};c.type=o,c.pic=null!==l?l:"",c.title=i,c.url=window.location.href,a.shareContent(c)}},a.process.moveInImg=function(t){for(var o=t,a=function(t){var o=!1;return e.each(n.extClassArr,function(n,a){if(e.hasClass(t,a))return void(o=!0)}),o};!a(o)&&o;)try{o=o.parentNode}catch(e){break}if(!a(o)){e.show(n.imgAreaDom),n.imgShareDom=t;var i=e.offset(t),r=e.width(t),s=e.height(t),l=e.width(n.imgAreaDom),c=e.height(n.imgAreaDom),u=i.top+(s-c-10),m=i.left+(r-l-11);e.css(n.imgAreaDom,{top:u+"px",left:m+"px"})}},a.process.moveOutImg=function(t){for(var o=t.relatedTarget||t.toElement;o!==n.imgAreaDom&&o;)try{o=o.parentNode}catch(e){break}o!==n.imgAreaDom&&(e.hide(n.imgAreaDom),n.imgShareDom=null)},a.process.contentShare=function(t){var i=e.attr(t,"data-type"),r=o.contentData,s=[];if("weixin"!==i){a.sendStatisticInfo(i);var l=600,c=450,u=(window.screen.availHeight-30-c)/2,m=(window.screen.availWidth-10-l)/2,d="scrollbars=no,width="+l+",height="+c+",left="+m+",top="+u+",status=no,resizable=yes";s.push("type="+encodeURIComponent(i)),s.push("title="+encodeURIComponent("【"+r.docName+"】"+r.summary));var f=o.getStatisticUrlByType(r.docUrl,i);s.push("url="+encodeURIComponent(f)),s.push("pic="+encodeURIComponent(r.image)),s.push("sinaRalateUid="+encodeURIComponent(n.sinaRalateUid)),window.open("http://h0.ifengimg.com/commonpage/0304/share_open.html?"+s.join("&"),"_blank",d)}else a.weixinShare(t)},a.process.selectionShare=function(t){var n=e.attr(t,"data-type"),i=o.contentData;if("undefined"!=typeof n&&""!==n){a.sendStatisticInfo(n);var r={};r.type=n,r.pic="undefined"!=typeof i.image&&""!==i.image?i.image:"",r.title=o.getSelectionText(),r.url=window.location.href,a.shareContent(r)}},a.process.hideShareArea=function(){e.hide(n.shareAreaDom)},a.process.mousedown=function(e){o.startFlag=!0,0===e.button&&o.setSelectionEmpty()},a.process.mouseup=function(t){if(o.endFlag=!0,o.startFlag&&o.endFlag&&o.moveInFlag&&""!==o.getSelectionText()){var a=t||window.event,i=document.documentElement.scrollLeft||document.body.scrollLeft,r=document.documentElement.scrollTop||document.body.scrollTop,s=a.pageX||a.clientX+i,l=a.pageY||a.clientY+r;e.css(n.shareAreaDom,{top:l+10+"px",left:s-50+"px"}),e.show(n.shareAreaDom)}},a.process.mouseover=function(){o.moveInFlag=!0},a.process.mouseout=function(e,t){for(var n=e.relatedTarget||e.toElement;n!==t&&n;)try{n=n.parentNode}catch(e){break}n!==t&&(o.endFlag=!1,o.startFlag=!1,o.moveInFlag=!1)},a.beforeShare=function(e){n.beforeFn=e};var i={beforeShare:a.beforeShare,init:a.init};return i});